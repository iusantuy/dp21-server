{% load custom_filters %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Invoice {{ invoice_number }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans p-8">

  <!-- Invoice Container -->
  <div class="relative bg-white p-8 border border-gray-200 rounded-lg shadow-lg max-w-4xl mx-auto">

    <!-- Background Watermark -->
    {% for w in watermarks %}
    <span class="absolute text-gray-300 opacity-10 font-bold text-6xl select-none pointer-events-none whitespace-nowrap"
          style="top:{{ w.top }}; left:{{ w.left }}; transform: rotate(-45deg);">
      {{ store_name }}
    </span>
    {% endfor %}

    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-start border-b-2 border-gray-200 pb-4 mb-6">
      <div>
        <h1 class="text-2xl font-bold text-gray-900 mb-1">INVOICE</h1>
        <p class="text-sm text-gray-500 mb-1">Snacks and Lunch Boxes</p>
        <p class="text-sm text-gray-700">
          <strong>Nomor Tagihan:</strong> {{ invoice_number }}<br>
          <strong>Tanggal:</strong> {{ date }}
        </p>
      </div>
      {% if store_logo_url %}
      <div class="mt-4 md:mt-0 flex-shrink-0">
        <img src="{{ store_logo_url }}" alt="{{ store_name }} logo" class="w-24 h-24 object-contain">
      </div>
      {% endif %}
    </div>

    <!-- Customer Info -->
    <div class="flex flex-col md:flex-row justify-between text-gray-700 mb-6 gap-4">
      <div class="flex-1">
        <p class="font-semibold">Kepada:</p>
        <p>{{ customer_name }}</p>
        {% if customer_address %}
        <p>{{ customer_address }}</p>
        {% endif %}
      </div>
      <div class="flex-1 md:text-right">
        <p class="font-semibold">Kontak:</p>
        <p>{{ contact }}</p>
      </div>
    </div>

    <!-- Items Table -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse text-sm mb-6">
        <thead class="bg-gray-100 border-b border-gray-200">
          <tr>
            <th class="text-left p-2">Menu</th>
            <th class="text-center p-2">Qty</th>
            <th class="text-right p-2">Harga</th>
            <th class="text-right p-2">Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr class="border-b border-gray-200 {% cycle 'bg-white' 'bg-gray-50' %}">
            <td class="p-2">{{ item.menu }}</td>
            <td class="p-2 text-center">{{ item.quantity }}</td>
            <td class="p-2 text-right">Rp {{ item.price|floatformat:0 }}</td>
            <td class="p-2 text-right">Rp {{ item.quantity|mul:item.price|floatformat:0 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Totals Section -->
    <div class="text-right text-gray-900 mb-6 space-y-1">
      <p><strong>Total Harga Item:</strong> Rp {{ subtotal|floatformat:0 }}</p>
      <p><strong>DP:</strong> Rp {{ dp|floatformat:0 }}</p>
      <p class="text-lg font-bold"><strong>Total Bayar:</strong> Rp {{ total|floatformat:0 }}</p>
    </div>

    <!-- Payment Info -->
    <div class="border-t border-gray-200 pt-3 text-gray-700 mb-6">
      <p><strong>Pembayaran:</strong> {{ payment_method }}</p>
      <p><strong>Ket:</strong> {{ ket }}</p>
    </div>

    <!-- Signatures -->
    <div class="flex justify-between mt-10">
      <div class="w-1/2">
        <p class="mb-20">Tanda Terima</p>
        <div class="border-t w-4/5 mx-auto"></div>
      </div>
      <div class="w-1/2 text-right">
        <p class="mb-20">Hormat Kami</p>
        <div class="border-t w-4/5 mx-auto"></div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center text-gray-400 text-xs mt-12">
      <div class="relative w-full border-t border-gray-200 h-5 mt-4">
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 bg-white flex items-center gap-1 px-1">
          <img src="{{ store_logo_url }}" alt='Instagram' class="w-3 h-3">
          <span>@dolcepapa.21</span>
        </div>
      </div>
      <p class="italic mt-1">Life's Sweeter with Papaâ€™s Sugar</p>
    </footer>

  </div>
</body>
</html>

        position: absolute;
        bottom: 10mm;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 12px;
        color: #9ca3af;
        padding: 0;